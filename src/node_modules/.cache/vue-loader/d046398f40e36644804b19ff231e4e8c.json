{"remainingRequest":"/Users/vascomartins/Documents/Dev/aboutme/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/vascomartins/Documents/Dev/aboutme/src/views/Quiz.vue?vue&type=style&index=0&id=0fdabe2f&scoped=true&lang=css&","dependencies":[{"path":"/Users/vascomartins/Documents/Dev/aboutme/src/views/Quiz.vue","mtime":1554068272985},{"path":"/Users/vascomartins/Documents/Dev/aboutme/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/usr/local/lib/node_modules/@vue/cli-service-global/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/vascomartins/Documents/Dev/aboutme/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/vascomartins/Documents/Dev/aboutme/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.home {\n  display: flex;\n  flex-direction: center;\n  text-align: center;\n  padding: 10px;\n}\n.home h1 {\n  color: #00A9B1;\n  font-size: 30px;\n}\n\n.space {\n    height: 30px;\n}\n\n.counter {\n    margin: 10px;\n    color: white;\n    background: #00A9B1;\n    padding: 10px;\n    border-radius: 20px;\n}\n\n\n.input {\n    margin-top: 50px;\n    height: 70px;\n    width: 90%;\n    border-radius: 30px;\n    border: 2px solid black;\n    padding-left: 30px;\n    font-size: 24px;\n    color: rgb(87, 87, 87);\n    transition: all 0.3s;\n}\n\n.social-share .url {\n    border: 1px solid black;\n    border-radius: 50px;\n    padding-top: 20px;\n    padding-bottom: 20px;\n    padding-left: 5px;\n    padding-right: 5px;\n    font-size: 14px;\n}\n\ninput:focus {\n    border: 2px solid #00A9B1;\n}\n\n*:focus {\n    outline: none;\n}\n\n  ul {\n      border: 1px solid black;\n      border-radius: 30px;\n      padding: 0;\n      width: 100%;\n  }\n\nul li {\n    list-style: none;\n    border-bottom: 1px solid black;\n    cursor:pointer;\n    margin: 0;\n    font-size: 26px;\n    padding: 10px;\n}\n\nul li div {\n    width: 100%;\n    height: 100%;\n    padding: 5px;\n    margin: 0;\n}\n\nul li:hover {\n    color: rgb(116, 179, 22);\n}\n\n  ul li:last-child {\n      border-bottom: none;\n  }\n\n\n\nbutton {\n  margin-top: 10px;\n  width: 130px;\n  height: 50px;\n  background: #2db81a;\n  border: none;\n  border-radius: 40px;\n  color: white;\n  font-weight: 400;\n  font-size: 26px;\n  cursor: pointer;\n  -webkit-box-shadow: 4px 3px 40px -16px rgba(0,0,0,0.75);\n  -moz-box-shadow: 4px 3px 40px -16px rgba(0,0,0,0.75);\n  box-shadow: 4px 3px 40px -16px rgba(0,0,0,0.75);\n\n}\n",{"version":3,"sources":["Quiz.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"Quiz.vue","sourceRoot":"views","sourcesContent":["<template>\n<div v-if=\"this.loaded\" class=\"home\">\n\n  <div v-if=\"!this.loggedIn\">\n    <login></login>\n  </div>\n   <div v-else>\n       <div v-if=\"!this.leaderboard\">\n        <div class=\"space\"></div>\n            <span class=\"counter\">{{ choose + 1}} / {{questions.length}}</span>\n            <h1>{{questions[choose]}}</h1>\n            <div class=\"question-list\">\n\n                <ul>\n                    <li v-for=\"(answer, index) in answers[choose]\" :key=\"index\">\n                        <div v-if=\"show\">\n                            <div v-if=\"index === correctAnswers[choose]\" style=\"color: green;\">{{answer}}</div>\n                            <div v-else style=\"color: red;\">{{answer}}</div>\n                        </div>\n                        <div v-else v-on:click=\"chooseAnswer(index)\">{{answer}}</div>\n                    </li>\n                </ul>\n            </div>\n        </div>\n        <div v-else>\n            <h1>Quiz do(a) {{ name }}</h1>\n            <div v-if=\"!this.hasAnswered\">\n            <p>Partilha o link com os teus amigos:</p>\n            <div class=\"social-share\">\n                \n                <p class=\"url\">{{urlCopy}}</p>\n                <button v-on:click=\"copy()\">Copiar</button>\n                 \n            </div>\n            </div>\n            <div v-else>\n                <h2>Resultado: {{percentage}}%</h2>\n                <p>Acertaste {{correct}} / {{questions.length}} questões</p>\n\n                <button v-on:click=\"openCreator()\">Criar Quiz</button>\n            </div>\n\n            <h1>Leaderboard</h1>\n\n            <table style=\"width:100%\">\n                <tr>\n                    <th>Nome</th>\n                    <th>Pontuação</th> \n                </tr>\n                <tr v-for=\"(lead, index) in leader\" :key=\"index\">\n                    <td>{{lead['name']}}</td>\n                    <td>{{ lead['percentage'] }}%</td>\n                </tr>\n            </table>\n        </div>\n    </div>\n</div>\n</template>\n\n<script>\n\nimport firebase,{ firestore } from 'firebase'\nimport login from './Login.vue'\nimport { setTimeout } from 'timers';\n\nexport default {\n  name: 'quiz',\n\n  components: {\n      login,\n  },\n\n  data() {\n      return {\n          loggedIn: false,\n          leaderboard: false,\n          isCreating: false,\n          hasAnswered: false,\n          show: false,\n          loaded: false,\n\n          questionNumber: 1,\n          quizId: null,\n          userId: null,\n          choose: 0,\n          index: 0,\n          percentage: 0,\n          correct: 0,\n\n          questions: [],\n          answers: [],\n          correctAnswers: [],\n          choosen: [],\n          leader: [],\n\n          currentName: '',\n          name: '',\n          urlCopy: 'http://aboutme.se3me.com/quiz/' + this.$route.params.quizUrl,\n          url: this.$route.params.quizUrl\n      }\n  },\n\n   mounted() {\n     this.getQuestionsAndAnswers()\n     \n     firebase.auth().onAuthStateChanged((user) => {\n         if(user) {\n             console.log(\"Logged in \" + user.uid);\n\n            firebase.firestore().collection(\"users\").where(\"uid\", \"==\", user.uid).get().then((query) => {\n                \n                this.loaded = true\n                if(!(this.$route.params.quizUrl === query.docs[0].id)) {\n                            const quemSabeMais = firebase.firestore().collection(\"quemSabeMais\")\n\n                            quemSabeMais.where(\"doc\", \"==\", this.$route.params.quizUrl).get().then((snapshot) => {\n                                this.correctAnswers = snapshot.docs[0].data().correctAnswers\n\n                                var whoAnswered = snapshot.docs[0].data().otherAnswers\n\n                                for(var i = 0; i < whoAnswered.length; i++) {\n                                    if(whoAnswered[i][\"user\"] === firebase.auth().currentUser.uid) {\n                                        this.leaderboard = true\n                                        this.percentage = whoAnswered[i][\"percentage\"]\n                                        this.correct = this.percentage / 10\n                                        this.hasAnswered = true\n                                        this.getLeaderboard()\n                                    }\n                                }\n                                \n                                firebase.firestore().collection(\"users\").doc(this.$route.params.quizUrl).get().then((query) => {\n                                    this.name = query.data().name\n                                })\n                            })\n                }\n\n                // In case the user has already a quiz\n                if(query.docs[0].data().hasQuiz) {\n                    //If there's no quiz ID in the url, the user will be redirected to \n                    //their quiz URL\n                    if(!this.$route.params.quizUrl) {\n                        this.$router.push('/quiz/' + query.docs[0].id)\n                        this.leaderboard = true\n                    } else {\n                        //If there's a Quiz Id and it's equal to the current user's id\n                        if(this.$route.params.quizUrl === query.docs[0].id) {\n                            this.leaderboard = true\n                            this.getLeaderboard()\n                        } \n                    }\n                } else {\n                    if(!this.$route.params.quizUrl) {\n                        this.quizId = query.docs[0].id\n                        this.isCreating = true\n                    }\n                }\n\n                this.currentName = query.docs[0].data().name\n\n            })\n\n             this.toggleLoggedIn()\n         }\n     });\n\n  },\n\n    methods: {\n        openCreator: function() {\n            this.$router.push(\"/quiz/\")\n            location.reload()\n        },\n        copy: function() {\n        this.$copyText('http://aboutme.se3me.com/quiz/' + this.url).then((e) => {\n\n            this.urlCopy = \"URL Copiada!\"\n            \n            }, function (e) {\n            this.urlCopy = \"Erro\"\n        })\n    \n        },\n\n        getLeaderboard: function() {\n            \n                const quemSabeMais = firebase.firestore().collection(\"quemSabeMais\")\n\n                quemSabeMais.where(\"doc\", \"==\", this.$route.params.quizUrl).get().then((snapshot) => {\n                    this.leader = snapshot.docs[0].data().leaderboardPontuation\n                    this.leader = this.leader.sort()\n                })\n        },\n        chooseAnswer: function(index) {\n\n            this.choosen.push(index)\n\n            if(this.choose + 1 === this.questions.length) {\n\n                    if(this.isCreating) {\n                    firebase.firestore().collection(\"quemSabeMais\").add({\n\n                        userId: firebase.auth().currentUser.uid,\n                        doc: this.quizId,\n                        correctAnswers: this.choosen,\n                        otherAnswers: [],\n                        leaderboardPontuation: [],\n\n                    }).then((snapshot) => {\n\n                        this.$router.push('/quiz/' + this.quizId)\n                        this.leaderboard = true\n                        this.urlCopy = 'http://aboutme.se3me.com/quiz/' + this.quizId\n\n                        firebase.firestore().collection(\"users\").doc(this.quizId).update({\n\n                            hasQuiz: true\n\n                        }).catch((e) => {\n                            console.log(e)\n                        })\n                    })\n                } else {\n\n                        this.show = true\n                        var count = 0\n                        for (var i = 0; i < this.correctAnswers.length; i++) {\n                            if(this.choosen[i] === this.correctAnswers[i]) {\n                                count += 1\n                            }\n                        }\n\n                        var percentage = (count * 100) / this.correctAnswers.length\n                        var uid = firebase.auth().currentUser.uid\n                    \n\n                         const quemSabeMais = firebase.firestore().collection(\"quemSabeMais\")\n                        \n                        quemSabeMais.where(\"doc\", \"==\", this.$route.params.quizUrl).get().then((query) => {\n                \n                            quemSabeMais.doc(query.docs[0].id).update({\n\n                                otherAnswers : [\n                                    {\n                                        \"user\" : uid,\n                                        \"percentage\" : percentage\n                                    }\n                                ],\n\n                                leaderboardPontuation : [\n                                    {\n                                        \"name\" : this.currentName,\n                                        \"percentage\" : percentage\n                                    }\n                                ],\n\n\n                            }).then((query) => {\n\n                                this.leaderboard = true\n                                this.percentage = percentage\n                                this.hasAnswered = true\n                                this.correct = count\n                            })\n                        })\n\n\n                     \n\n                }\n                \n\n            } else {\n                \n                if(!this.isCreating) {\n                    this.show = true\n                    setTimeout(() => {\n                        this.show = false\n                    this.choose += 1\n                    }, 1.5 * 1000)\n                } else {\n                this.choose += 1\n                }\n\n            }\n        },\n        toggleLoggedIn: function() {\n\n            this.loggedIn = !this.loggedIn\n\n        },\n\n        getQuestionsAndAnswers: function() {\n\n            firebase.firestore().collection(\"questions\").get().then((snapshot) => {\n\n                snapshot.docs.forEach((doc) => {\n\n                    this.answers.push( doc.data().answers)\n                    this.questions.push(doc.data().question)\n\n                })\n            })\n        }\n    },\n\n \n  \n\n}\n</script>\n\n<style scoped>\n\n  .home {\n    display: flex;\n    flex-direction: center;\n    text-align: center;\n    padding: 10px;\n  }\n  .home h1 {\n    color: #00A9B1;\n    font-size: 30px;\n  }\n\n  .space {\n      height: 30px;\n  }\n\n  .counter {\n      margin: 10px;\n      color: white;\n      background: #00A9B1;\n      padding: 10px;\n      border-radius: 20px;\n  }\n\n\n  .input {\n      margin-top: 50px;\n      height: 70px;\n      width: 90%;\n      border-radius: 30px;\n      border: 2px solid black;\n      padding-left: 30px;\n      font-size: 24px;\n      color: rgb(87, 87, 87);\n      transition: all 0.3s;\n  }\n\n  .social-share .url {\n      border: 1px solid black;\n      border-radius: 50px;\n      padding-top: 20px;\n      padding-bottom: 20px;\n      padding-left: 5px;\n      padding-right: 5px;\n      font-size: 14px;\n  }\n\n  input:focus {\n      border: 2px solid #00A9B1;\n  }\n\n  *:focus {\n      outline: none;\n  }\n\n    ul {\n        border: 1px solid black;\n        border-radius: 30px;\n        padding: 0;\n        width: 100%;\n    }\n\n  ul li {\n      list-style: none;\n      border-bottom: 1px solid black;\n      cursor:pointer;\n      margin: 0;\n      font-size: 26px;\n      padding: 10px;\n  }\n\n  ul li div {\n      width: 100%;\n      height: 100%;\n      padding: 5px;\n      margin: 0;\n  }\n\n  ul li:hover {\n      color: rgb(116, 179, 22);\n  }\n\n    ul li:last-child {\n        border-bottom: none;\n    }\n\n \n\n  button {\n    margin-top: 10px;\n    width: 130px;\n    height: 50px;\n    background: #2db81a;\n    border: none;\n    border-radius: 40px;\n    color: white;\n    font-weight: 400;\n    font-size: 26px;\n    cursor: pointer;\n    -webkit-box-shadow: 4px 3px 40px -16px rgba(0,0,0,0.75);\n    -moz-box-shadow: 4px 3px 40px -16px rgba(0,0,0,0.75);\n    box-shadow: 4px 3px 40px -16px rgba(0,0,0,0.75);\n\n  }\n</style>\n\n"]}]}